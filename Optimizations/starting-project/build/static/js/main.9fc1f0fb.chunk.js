(this["webpackJsonpionic-react"]=this["webpackJsonpionic-react"]||[]).push([[1],{59:function(e,t,n){e.exports=n(91)},64:function(e,t,n){var a={"./pwa-action-sheet.entry.js":[95,59],"./pwa-camera-modal-instance.entry.js":[96,60],"./pwa-camera-modal.entry.js":[97,61],"./pwa-camera.entry.js":[98,62],"./pwa-toast.entry.js":[99,63]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=64,e.exports=r},67:function(e,t,n){var a={"./ion-action-sheet.entry.js":[101,7],"./ion-alert.entry.js":[102,8],"./ion-app_8.entry.js":[103,9],"./ion-avatar_3.entry.js":[104,19],"./ion-back-button.entry.js":[105,20],"./ion-backdrop.entry.js":[106,45],"./ion-button_2.entry.js":[107,21],"./ion-card_5.entry.js":[108,22],"./ion-checkbox.entry.js":[109,23],"./ion-chip.entry.js":[110,24],"./ion-col_3.entry.js":[111,46],"./ion-datetime_3.entry.js":[112,12],"./ion-fab_3.entry.js":[113,25],"./ion-img.entry.js":[114,47],"./ion-infinite-scroll_2.entry.js":[115,48],"./ion-input.entry.js":[116,26],"./ion-item-option_3.entry.js":[117,27],"./ion-item_8.entry.js":[118,28],"./ion-loading.entry.js":[119,29],"./ion-menu_3.entry.js":[120,30],"./ion-modal.entry.js":[121,10],"./ion-nav_2.entry.js":[122,16],"./ion-popover.entry.js":[123,11],"./ion-progress-bar.entry.js":[124,31],"./ion-radio_2.entry.js":[125,32],"./ion-range.entry.js":[126,33],"./ion-refresher_2.entry.js":[127,13],"./ion-reorder_2.entry.js":[128,18],"./ion-ripple-effect.entry.js":[129,49],"./ion-route_4.entry.js":[130,34],"./ion-searchbar.entry.js":[131,35],"./ion-segment_2.entry.js":[132,36],"./ion-select_3.entry.js":[133,37],"./ion-slide_2.entry.js":[134,50],"./ion-spinner.entry.js":[135,15],"./ion-split-pane.entry.js":[136,51],"./ion-tab-bar_2.entry.js":[137,38],"./ion-tab_2.entry.js":[138,17],"./ion-text.entry.js":[139,39],"./ion-textarea.entry.js":[140,40],"./ion-toast.entry.js":[141,41],"./ion-toggle.entry.js":[142,14],"./ion-virtual-scroll.entry.js":[143,52]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=67,e.exports=r},69:function(e,t,n){var a={"./ion-icon.entry.js":[144,67]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=69,e.exports=r},77:function(e,t,n){},78:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),l=n.n(o),i=n(57),c=n(1),s=n(51),m=n(19),u=n(12),d=r.a.createContext({memories:[],addMemory:function(){},initContext:function(){}}),E=(n(77),function(e){return r.a.createElement(c.e,{className:"memory-item"},r.a.createElement("img",{src:e.image,alt:e.title}),r.a.createElement(c.f,null,r.a.createElement(c.g,null,e.title)))}),f=function(e){return r.a.createElement(r.a.Fragment,null,e.items.map((function(e){return r.a.createElement(c.u,{key:e.id},r.a.createElement(c.h,null,r.a.createElement(E,{image:e.base64Url,title:e.title})))})))},y=function(){var e=Object(a.useContext)(d).memories.filter((function(e){return"good"===e.type}));return r.a.createElement(c.r,null,r.a.createElement(c.m,null,r.a.createElement(c.B,null,r.a.createElement(c.A,null,"Good Memories"),Object(c.K)("ios")&&r.a.createElement(c.d,{slot:"end"},r.a.createElement(c.c,{routerLink:"/new-memory"},r.a.createElement(c.n,{slot:"icon-only",icon:u.a}))))),r.a.createElement(c.i,null,r.a.createElement(c.l,null,0===e.length&&r.a.createElement(c.u,null,r.a.createElement(c.h,{className:"ion-text-center"},r.a.createElement("h2",null,"No good memories found."))),r.a.createElement(f,{items:e})),!Object(c.K)("ios")&&r.a.createElement(c.j,{vertical:"bottom",horizontal:"end",slot:"fixed"},r.a.createElement(c.k,{routerLink:"/new-memory"},r.a.createElement(c.n,{icon:u.a})))))},j=function(){var e=Object(a.useContext)(d).memories.filter((function(e){return"bad"===e.type}));return r.a.createElement(c.r,null,r.a.createElement(c.m,null,r.a.createElement(c.B,null,r.a.createElement(c.A,null,"Bad Memories"),Object(c.K)("ios")&&r.a.createElement(c.d,{slot:"end"},r.a.createElement(c.c,{routerLink:"/new-memory"},r.a.createElement(c.n,{slot:"icon-only",icon:u.a}))))),r.a.createElement(c.i,null,r.a.createElement(c.l,null,0===e.length&&r.a.createElement(c.u,null,r.a.createElement(c.h,{className:"ion-text-center"},r.a.createElement("h2",null,"No bad memories found."))),r.a.createElement(f,{items:e})),!Object(c.K)("ios")&&r.a.createElement(c.j,{vertical:"bottom",horizontal:"end",slot:"fixed"},r.a.createElement(c.k,{routerLink:"/new-memory"},r.a.createElement(c.n,{icon:u.a})))))},p=n(3),b=n.n(p),h=n(10),v=n(16),g=n(18),w=n(55),O=(n(78),g.e.Camera),x=g.e.Filesystem,k=function(){var e=Object(a.useState)(),t=Object(v.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)("good"),i=Object(v.a)(l,2),s=i[0],E=i[1],f=Object(a.useContext)(d),y=Object(a.useRef)(null),j=Object(a.useRef)(null),p=Object(m.e)(),k=function(){j.current.click()},_=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.c.isPluginAvailable("Camera")){e.next=3;break}return k(),e.abrupt("return");case 3:return e.prev=3,e.next=6,O.getPhoto({resultType:g.a.Uri,source:g.b.Camera,quality:80,width:500});case 6:if((t=e.sent)&&t.webPath){e.next=9;break}return e.abrupt("return");case 9:o({path:t.path,preview:t.webPath}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),k();case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(b.a.mark((function e(){var t,a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=null===(t=y.current)||void 0===t?void 0:t.value)&&0!==a.toString().trim().length&&n&&s){e.next=3;break}return e.abrupt("return");case 3:return r=(new Date).getTime()+".jpeg",e.next=6,Object(w.a)(n.preview);case 6:o=e.sent,x.writeFile({path:r,data:o,directory:g.d.Data}),f.addMemory(r,o,a.toString(),s),p.length>0?p.goBack():p.replace("/good-memories");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(c.r,null,r.a.createElement(c.m,null,r.a.createElement(c.B,null,r.a.createElement(c.d,{slot:"start"},r.a.createElement(c.b,{defaultHref:"/good-memories"})),r.a.createElement(c.A,null,"Add New Memory"))),r.a.createElement(c.i,null,r.a.createElement(c.l,null,r.a.createElement(c.u,null,r.a.createElement(c.h,null,r.a.createElement(c.p,null,r.a.createElement(c.q,{position:"floating"},"Memory Title"),r.a.createElement(c.o,{type:"text",ref:y})))),r.a.createElement(c.u,null,r.a.createElement(c.h,null,r.a.createElement(c.v,{onIonChange:function(e){var t=e.detail.value;E(t)},value:s},r.a.createElement(c.w,{value:"good"},"Good Memory"),r.a.createElement(c.w,{value:"bad"},"Bad Memory")))),r.a.createElement(c.u,{className:"ion-text-center"},r.a.createElement(c.h,null,r.a.createElement("div",{className:"image-preview"},!n&&r.a.createElement("h3",null,"No photo chosen."),n&&r.a.createElement("img",{src:n.preview,alt:"Preview"})),r.a.createElement(c.c,{fill:"clear",onClick:_},r.a.createElement(c.n,{icon:u.c,slot:"start"}),r.a.createElement(c.q,null,"Take Photo")),r.a.createElement("input",{type:"file",hidden:!0,ref:j,onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(){o({path:void 0,preview:n.result.toString()})},n.readAsDataURL(t)}}))),r.a.createElement(c.u,{className:"ion-margin-top"},r.a.createElement(c.h,{className:"ion-text-center"},r.a.createElement(c.c,{onClick:C},"Add Memory"))))))},_=(n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),function(){var e=Object(a.useContext)(d).initContext;return Object(a.useEffect)((function(){e()}),[e]),r.a.createElement(c.a,null,r.a.createElement(s.a,null,r.a.createElement(c.z,null,r.a.createElement(c.t,null,r.a.createElement(m.b,{path:"/good-memories"},r.a.createElement(y,null)),r.a.createElement(m.b,{path:"/bad-memories"},r.a.createElement(j,null)),r.a.createElement(m.b,{path:"/new-memory"},r.a.createElement(k,null)),r.a.createElement(m.a,{to:"/good-memories"})),r.a.createElement(c.x,{slot:"bottom"},r.a.createElement(c.y,{href:"/good-memories",tab:"good"},r.a.createElement(c.n,{icon:u.j}),r.a.createElement(c.q,null,"Good Memories")),r.a.createElement(c.y,{href:"/bad-memories",tab:"bad"},r.a.createElement(c.n,{icon:u.o}),r.a.createElement(c.q,null,"Bad Memories"))))))}),C=n(54),N=n(26),M=g.e.Storage,P=g.e.Filesystem,U=function(e){var t=Object(a.useState)([]),n=Object(v.a)(t,2),o=n[0],l=n[1];Object(a.useEffect)((function(){o.map((function(e){return{id:e.id,title:e.title,imagePath:e.imagePath,type:e.type}}));M.set({key:"memories",value:JSON.stringify(o)})}),[o]);var i=Object(a.useCallback)(Object(h.a)(b.a.mark((function e(){var t,n,a,r,o,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get({key:"memories"});case 2:t=e.sent,n=t.value?JSON.parse(t.value):[],a=[],r=Object(C.a)(n),e.prev=6,r.s();case 8:if((o=r.n()).done){e.next=16;break}return i=o.value,e.next=12,P.readFile({path:i.imagePath,directory:g.d.Data});case 12:c=e.sent,a.push({id:i.id,title:i.title,type:i.type,imagePath:i.imagePath,base64Url:"data:image/jpeg;base64,"+c.data});case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:l(a);case 25:case"end":return e.stop()}}),e,null,[[6,18,21,24]])}))),[]);return r.a.createElement(d.Provider,{value:{memories:o,addMemory:function(e,t,n,a){var r={id:Math.random().toString(),title:n,type:a,imagePath:e,base64Url:t};l((function(e){return[].concat(Object(N.a)(e),[r])}))},initContext:i}},e.children)};l.a.render(r.a.createElement(U,null,r.a.createElement(_,null)),document.getElementById("root")),Object(i.a)(window)}},[[59,3,6]]]);
//# sourceMappingURL=main.9fc1f0fb.chunk.js.map